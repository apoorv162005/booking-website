<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>BlueBus-Book Bus Tickets Online</title><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"><style>*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif}
body{background:#f8f9fa;color:#333;min-height:100vh;display:flex;flex-direction:column}
#login-container{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#008cff,#0056b3);padding:20px}.login-box{background:white;padding:40px;border-radius:15px;box-shadow:0 10px 30px rgba(0,0,0,0.2);width:100%;max-width:450px;text-align:center;animation:fadeIn 0.8s ease-in}.login-box h1{color:#0056b3;margin-bottom:10px;font-size:28px}.login-box p{color:#666;margin-bottom:30px}.logo{font-size:50px;color:#008cff;margin-bottom:20px}.login-box input{width:100%;padding:15px;margin:10px 0;border:2px solid #e0e0e0;border-radius:8px;font-size:16px;transition:border-color 0.3s}.login-box input:focus{border-color:#008cff;outline:none}.btn{background:#ffcc00;color:#333;padding:15px 25px;border:none;border-radius:8px;cursor:pointer;font-weight:bold;text-decoration:none;display:inline-block;transition:all 0.3s ease;width:100%;font-size:16px;margin-top:10px}.btn:hover{background:#ffd700;transform:scale(1.02)}
#app-container{display:none}
header{background:linear-gradient(135deg,#008cff,#0056b3);padding:15px 40px;box-shadow:0 2px 10px rgba(0,0,0,0.1);position:sticky;top:0;z-index:100}
nav{display:flex;justify-content:space-between;align-items:center}
nav ul{list-style:none;display:flex;gap:30px;flex-wrap:wrap}
nav a{color:white;text-decoration:none;font-weight:bold;display:flex;align-items:center;gap:8px;padding:10px 15px;border-radius:5px;transition:all 0.3s ease}
nav a:hover{background:rgba(255,255,255,0.2);transform:translateY(-2px)}.user-section{display:flex;align-items:center;gap:20px}.login-status{color:white;font-size:14px;padding:5px 15px;background:rgba(255,255,255,0.2);border-radius:20px}
section{display:none;padding:40px 20px;max-width:1200px;margin:0 auto;animation:fadeIn 0.5s ease-in;flex:1}
section.active{display:block}
@keyframes fadeIn{from{opacity:0;transform:translateY(20px)}
to{opacity:1;transform:translateY(0)}}.btn-secondary{background:#6c757d;color:white}.btn-secondary:hover{background:#5a6268}.card{background:white;border-radius:10px;padding:20px;box-shadow:0 4px 15px rgba(0,0,0,0.1);margin:15px 0;transition:transform 0.3s ease}.card:hover{transform:translateY(-5px)}
#home{text-align:center}.search-form{background:white;padding:30px;border-radius:15px;box-shadow:0 5px 20px rgba(0,0,0,0.1);margin:30px auto;max-width:800px}.search-form h2{color:#0056b3;margin-bottom:20px}.input-group{display:flex;gap:15px;justify-content:center;flex-wrap:wrap;margin:20px 0}.input-group input,.input-group select{padding:12px 15px;border:2px solid #e0e0e0;border-radius:8px;font-size:16px;min-width:180px}.offers-section{margin:50px 0}.offers-container{display:flex;gap:20px;overflow-x:auto;padding:20px 0;scrollbar-width:thin}.offer-card{flex:0 0 auto;width:300px;border-radius:10px;overflow:hidden;box-shadow:0 4px 15px rgba(0,0,0,0.1)}.sort-section{text-align:center;margin-bottom:30px}.sort-section button{margin:5px;padding:8px 15px;background:#008cff;color:white;border:none;border-radius:5px;cursor:pointer}.bus-item{display:flex;justify-content:space-between;align-items:center;padding:20px;border-left:4px solid #008cff;flex-wrap:wrap;gap:15px}.bus-price{font-size:24px;font-weight:bold;color:#0056b3}.bus-info{flex:1;min-width:250px}.hotel-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin-top:30px}.hotel-card{text-align:center;padding:0;overflow:hidden}.hotel-info{padding:15px}
#account{text-align:center}.service-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-top:30px}.service-card{text-align:center;padding:30px 20px}.service-card i{font-size:40px;color:#008cff;margin-bottom:15px}.seat-container{display:grid;grid-template-columns:repeat(4,60px);gap:15px;justify-content:center;margin:30px 0}.seat{width:60px;height:60px;background:#008cff;color:white;border:none;border-radius:8px;cursor:pointer;font-weight:bold;transition:all 0.3s ease}.seat:hover{background:#0056b3;transform:scale(1.1)}.seat.booked{background:#ccc;cursor:not-allowed}.seat.selected{background:#ffcc00;color:#333}.seat-legend{display:flex;justify-content:center;gap:20px;margin:20px 0}.legend-item{display:flex;align-items:center;gap:5px}.legend-color{width:20px;height:20px;border-radius:4px}.payment-methods{display:flex;gap:20px;justify-content:center;margin:30px 0;flex-wrap:wrap}.payment-option{text-align:center;padding:20px;border-radius:10px;box-shadow:0 4px 15px rgba(0,0,0,0.1);transition:transform 0.3s ease;cursor:pointer;width:220px}.payment-option:hover{transform:translateY(-5px)}.payment-icon{font-size:48px;margin-bottom:15px}.qr-code{width:150px;height:150px;margin:0 auto 15px;background:#f0f0f0;display:flex;align-items:center;justify-content:center;border-radius:10px;overflow:hidden}.qr-placeholder{width:100%;height:100%;object-fit:cover}.payment-form{background:white;padding:30px;border-radius:10px;box-shadow:0 4px 15px rgba(0,0,0,0.1);max-width:400px;margin:20px auto}.payment-form input{width:100%;padding:10px;margin:10px 0;border:1px solid #ddd;border-radius:5px}
#ticket{text-align:center}.ticket-card{background:linear-gradient(135deg,#008cff,#0056b3);color:white;padding:30px;border-radius:15px;box-shadow:0 10px 30px rgba(0,0,0,0.2);max-width:400px;margin:0 auto;position:relative;overflow:hidden}.ticket-card::before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background-image:url("data:image/svg+xml,%3Csvg xmlns='' viewBox='0 0 100 100' preserveAspectRatio='none'%3E%3Cpath d='M0,0 L100,0 L100,100 Z' fill='rgba(255,255,255,0.05)'/%3E%3C/svg%3E");background-size:cover;opacity:0.3}.ticket-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:10px;border-bottom:1px dashed rgba(255,255,255,0.3)}.ticket-logo{font-size:24px;font-weight:bold}.ticket-qrcode{width:80px;height:80px;background:white;border-radius:8px;display:flex;align-items:center;justify-content:center;margin:0 auto 20px}.ticket-qrcode img{width:70px;height:70px}.ticket-details{line-height:1.6}.ticket-footer{margin-top:20px;padding-top:15px;border-top:1px dashed rgba(255,255,255,0.3);font-size:14px}
footer{background:#002b6b;color:white;text-align:center;padding:20px;margin-top:auto}
@media(max-width:768px){header{padding:15px 20px}
nav{flex-direction:column;gap:15px}
nav ul{gap:10px}.input-group{flex-direction:column;align-items:center}.input-group input,.input-group select{width:100%;max-width:300px}.bus-item{flex-direction:column;text-align:center}.payment-methods{flex-direction:column;align-items:center}.payment-option{width:100%;max-width:300px}}</style></head><body><!--===LOGIN PAGE(SHOWN FIRST)===--><div id="login-container"><div class="login-box"><div class="logo"><i class="fa-solid fa-bus"></i></div><h1>Welcome to BlueBus</h1><p>Please log in to book your bus tickets</p><form id="loginForm"><input type="text" id="username" placeholder="Username or Email" required><input type="password" id="password" placeholder="Password" required><button type="submit" class="btn">Login to BlueBus</button></form><p style="margin-top: 20px; font-size: 14px; color: #666;">Enter any username and password to continue</p><p style="margin-top: 20px; font-size: 14px;"><a href="#" style="color: #008cff;">Forgot Password?</a></p></div></div><!--===MAIN APP(HIDDEN INITIALLY)===--><div id="app-container"><header><nav><ul><li><a href="#" onclick="showPage('home')"><i class="fa-solid fa-house"></i>Home</a></li><li><a href="#" onclick="showPage('buslist')"><i class="fa-solid fa-ticket"></i>Bus Tickets</a></li><li><a href="#" onclick="showPage('hotels')"><i class="fa-solid fa-hotel"></i>Hotels</a></li><li><a href="#" onclick="showPage('account')"><i class="fa-solid fa-circle-user"></i>Account</a></li><li><a href="#" onclick="showPage('support')"><i class="fa-solid fa-headset"></i>Support</a></li></ul><div class="user-section"><div class="login-status" id="loginStatus">Welcome!</div><a href="#" onclick="logout()" class="btn-secondary" style="padding: 8px 15px; font-size: 14px;"><i class="fa-solid fa-sign-out-alt"></i>Logout</a></div></nav></header><!--===PAGES AS SECTIONS===--><main><!-- HOME PAGE --><section id="home" class="active"><h1>Welcome to<span style="color: #008cff;">BlueBus</span></h1><p>Book bus tickets easily with the most trusted platform</p><div class="search-form"><h2>Search for Bus Tickets</h2><form id="searchForm"><div class="input-group"><input type="text" id="from" placeholder="From City" required list="cities"><input type="text" id="to" placeholder="To City" required list="cities"><input type="date" id="date" required><select id="passengers"><option value="1">1 Passenger</option><option value="2">2 Passengers</option><option value="3">3 Passengers</option><option value="4">4 Passengers</option><option value="5">5 Passengers</option></select></div><button type="submit" class="btn">Search Buses</button></form></div><datalist id="cities"><option value="Mumbai"><option value="Pune"><option value="Delhi"><option value="Bangalore"><option value="Chennai"><option value="Hyderabad"><option value="Kolkata"><option value="Ahmedabad"><option value="Jaipur"><option value="Goa"><option value="Lucknow"></datalist><div class="offers-section"><h2>🚀 Exclusive Bus Booking Offers</h2><div class="offers-container"><div class="offer-card"><div style="background: #ff6b6b; height: 150px; display: flex; align-items: center; justify-content: center; color: white; font-size: 20px; font-weight: bold;">Flat 20%OFF</div></div><div class="offer-card"><div style="background: #4ecdc4; height: 150px; display: flex; align-items: center; justify-content: center; color: white; font-size: 20px; font-weight: bold;">Cashback ₹100</div></div><div class="offer-card"><div style="background: #45b7d1; height: 150px; display: flex; align-items: center; justify-content: center; color: white; font-size: 20px; font-weight: bold;">Weekend Special</div></div></div></div><div class="card"><h3>Why Choose BlueBus?</h3><p>✅ Live Bus Tracking • ✅ 24/7 Customer Support • ✅ Best Prices • ✅ Safe&Secure</p></div></section><!-- BUS LIST PAGE --><section id="buslist"><h2>Available Buses</h2><div class="sort-section"><button onclick="sortBuses('price')">Sort by Price</button><button onclick="sortBuses('rating')">Sort by Rating</button><button onclick="sortBuses('departure')">Sort by Departure</button></div><div id="busList"></div></section><!-- HOTELS PAGE --><section id="hotels"><h2>🏨 Available Hotels</h2><div id="hotelGrid" class="hotel-grid"><!-- Hotels will be rendered here by JS --></div></section><!-- ACCOUNT PAGE --><section id="account"><h2>My Account</h2><div class="card" style="max-width: 400px; margin: 0 auto;"><div style="text-align: center;"><div style="width: 120px; height: 120px; background: #008cff; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 40px; margin: 0 auto 20px;" id="userInitials">U</div><h3 id="userName">User</h3><p id="userEmail">user@example.com</p><p id="userPhone">+91 XXXXX XXXXX</p></div><div style="margin-top: 20px;"><button class="btn" style="width: 100%; margin: 5px 0;">Edit Profile</button><button class="btn btn-secondary" style="width: 100%; margin: 5px 0;" onclick="logout()">Logout</button></div></div></section><!-- SUPPORT PAGE --><section id="support"><h2>24/7 Customer Support</h2><p>We're here to help you 24 hours a day, 7 days a week</p>
      
      <div class="service-grid">
        <div class="service-card card">
          <div class="payment-icon" style="color: #008cff;"><i class="fas fa-phone"></i></div>
          <h3>Call Support</h3>
          <p>1800-123-4567</p>
        </div>
        <div class="service-card card">
          <div class="payment-icon" style="color: #008cff;"><i class="fas fa-comments"></i></div>
          <h3>Live Chat</h3>
          <p>Instant help</p>
        </div>
        <div class="service-card card">
          <div class="payment-icon" style="color: #008cff;"><i class="fas fa-envelope"></i></div>
          <h3>Email Support</h3>
          <p>support@bluebus.com</p>
        </div>
      </div>
    </section>

    <!-- SEAT BOOKING -->
    <section id="seats">
      <h2>Choose Your Seat</h2>
      <p>Select an available seat for your journey: 
        <strong id="seatBookingSummary"></strong>
      </p>
      
      <div class="seat-legend">
        <div class="legend-item">
          <div class="legend-color" style="background: #008cff;"></div>
          <span>Available</span>
        </div>
        <div class="legend-item">
          <div class="legend-color" style="background: #ffcc00;"></div>
          <span>Selected</span>
        </div>
        <div class="legend-item">
          <div class="legend-color" style="background: #ccc;"></div>
          <span>Booked</span>
        </div>
      </div>
      
      <div class="seat-container" id="seatContainer"></div>
      <div style="text-align: center; margin-top: 30px;">
        <button class="btn" id="proceedToPayment" onclick="proceedToPayment()" disabled>Select a seat to proceed</button>
      </div>
    </section>

    <!-- PAYMENT PAGE -->
    <section id="payment">
      <h2>Payment Methods</h2>
      <div class="payment-methods">
        
        <!-- CREDIT/DEBIT CARD OPTION -->
        <div class="payment-option" onclick="showPaymentForm('card')">
          <div class="payment-icon" style="color: #008cff;"><i class="fab fa-cc-visa"></i></div>
          <h3>Credit/Debit Card</h3>
          <div class="qr-code">
            <img src="C:\Users\Apoorv Kulkarni\Downloads\WhatsApp Image 2025-09-29 at 1.33.34 AM.jpeg" alt="QR Code for credit card payment" class="qr-placeholder">
          </div>
        </div>
        
        <!-- UPI/GPAY OPTION -->
        <div class="payment-option" onclick="showPaymentForm('upi')">
          <div class="payment-icon" style="color: #008cff;"><i class="fab fa-google-pay"></i></div>
          <h3>UPI Payment (GPay)</h3>
          <div class="qr-code">
            <img src="C:\Users\Apoorv Kulkarni\Downloads\WhatsApp Image 2025-09-29 at 1.33.34 AM.jpeg" alt="QR Code for UPI payment" class="qr-placeholder">
          </div>
        </div>
      </div>
      
      <!-- CARD FORM -->
      <div id="cardForm" class="payment-form" style="display: none;">
        <h3>Card Details</h3>
        <input type="text" placeholder="Card Number" maxlength="16">
        <input type="text" placeholder="Expiry Date (MM/YY)" maxlength="5">
        <input type="text" placeholder="CVV" maxlength="3">
        <input type="text" placeholder="Cardholder Name">
        <button class="btn" style="width: 100%;" onclick="processPayment('card')">Pay Now</button>
      </div>
      
      <!-- UPI FORM -->
      <div id="upiForm" class="payment-form" style="display: none;">
        <h3>UPI Details</h3>
        <input type="text" placeholder="UPI ID (e.g., name@upi)">
        <button class="btn" style="width: 100%;" onclick="processPayment('upi')">Pay Now</button>
      </div>
    </section>

    <!-- TICKET CONFIRMATION PAGE -->
    <section id="ticket">
      <h2>🎉 Ticket Confirmed!</h2>
      <div class="ticket-card">
        <div class="ticket-header">
          <div class="ticket-logo">BLUEBUS</div>
          <div class="ticket-qrcode">
            <img src="https://placehold.co/70x70/ffffff/008cff?text=QR" alt="Ticket QR Code">
          </div>
        </div>
        
        <div class="ticket-details">
          <p><strong>Passenger:</strong> <span id="ticketPassenger">User</span></p>
          <p><strong>Route:</strong> <span id="ticketFrom">Pune</span> → <span id="ticketTo">Mumbai</span></p>
          <p><strong>Date:</strong> <span id="ticketDate">15 April 2025</span></p>
          <p><strong>Seat:</strong> <span id="ticketSeat">07</span></p>
          <p><strong>Amount:</strong> ₹<span id="ticketAmount">1,200</span></p>
          <p><strong>PNR:</strong> <span id="ticketPNR">BLB202512345</span></p>
        </div>
        
        <div class="ticket-footer">
          <p>Thank you for choosing BlueBus! Have a safe journey.</p>
        </div>
      </div>
      <div style="text-align: center; margin-top: 20px;">
        <button class="btn" onclick="downloadTicket()">Download Ticket</button>
        <button class="btn" style="background: white; color: #008cff; margin-left: 10px;" onclick="showPage('home')">Book Another Ticket</button>
      </div>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 BlueBus. All Rights Reserved. | Safe & Comfortable Travels</p>
  </footer>
</div>

<script>
  // === APPLICATION STATE & MOCK DATA ===
  let isLoggedIn = false;
  let currentUser = null;
  let selectedSeat = null;
  let bookingDetails = {
    from: '',
    to: '',
    date: '',
    passengers: 1,
    bus: null,
    seat: null,
    amount: 0
  };

  // EXPANDED BUS DATA (Kept from previous)
  const buses = [
    { id: 1, name: "Orange Tours (Mumbai-Pune)", route: "Mumbai to Pune", type: "AC Sleeper", price: 1200, rating: 4.5, departure: "15:30", seats: 25, amenities: ["WiFi", "Charging Port", "Blanket"] },
    { id: 2, name: "VRL Travels (Delhi-Jaipur)", route: "Delhi to Jaipur", type: "Non-AC Sleeper", price: 850, rating: 4.2, departure: "18:00", seats: 30, amenities: ["Water Bottle", "Magazine"] },
    { id: 3, name: "BlueBus Premium (Bangalore-Chennai)", route: "Bangalore to Chennai", type: "Luxury AC", price: 1500, rating: 4.8, departure: "20:15", seats: 20, amenities: ["WiFi", "Charging Port", "Blanket", "Snacks"] },
    { id: 4, name: "Shivshahi Bus Service (Pune-Goa)", route: "Pune to Goa", type: "AC Seater", price: 1100, rating: 3.9, departure: "08:00", seats: 40, amenities: ["Charging Port"] },
    { id: 5, name: "RSRTC Express (Delhi-Lucknow)", route: "Delhi to Lucknow", type: "Semi-Luxury", price: 950, rating: 4.1, departure: "22:45", seats: 35, amenities: ["Blanket", "Reading Light"] }
  ];

  // EXPANDED HOTEL DATA (Kept from previous)
  const hotels = [
    { id: 101, name: "Grand Palace Hotel", city: "Mumbai", rating: 5, price: 3000, imgColor: "#ff6b6b" },
    { id: 102, name: "Beachfront Resort", city: "Goa", rating: 4, price: 2000, imgColor: "#4ecdc4" },
    { id: 103, name: "The Royal Stay", city: "Delhi", rating: 4, price: 2500, imgColor: "#45b7d1" },
    { id: 104, name: "Silicon Valley Inn", city: "Bangalore", rating: 3, price: 1800, imgColor: "#f7a45c" },
    { id: 105, name: "Heritage Haveli", city: "Jaipur", rating: 4, price: 2200, imgColor: "#957DAD" },
    { id: 106, name: "Kolkata Central", city: "Kolkata", rating: 3, price: 1600, imgColor: "#FFC300" }
  ];


  // === LOGIN FUNCTIONALITY ===
  document.getElementById('loginForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const username = document.getElementById('username').value;
    const password = document.getElementById('password').value;
    
    if (username.trim() !== '' && password.trim() !== '') {
      isLoggedIn = true;
      
      const userInitial = username.charAt(0).toUpperCase();
      const userEmail = username.includes('@') ? username : `${username}@example.com`;
      
      currentUser = {
        name: username,
        email: userEmail,
        phone: '+91 ' + Math.floor(1000000000 + Math.random() * 9000000)
      };
      
      document.getElementById('login-container').style.display = 'none';
      document.getElementById('app-container').style.display = 'block';
      
      updateLoginUI();
      showPage('home'); // Go straight to home after login
    } else {
      alert('Please enter both username and password');
    }
  });

  function logout() {
    isLoggedIn = false;
    currentUser = null;
    
    document.getElementById('app-container').style.display = 'none';
    document.getElementById('login-container').style.display = 'flex';
    
    document.getElementById('loginForm').reset();
    alert('You have been logged out.');
  }

  function updateLoginUI() {
    const loginStatus = document.getElementById('loginStatus');
    
    if (isLoggedIn && currentUser) {
      loginStatus.textContent = `Welcome, ${currentUser.name}`;
      document.getElementById('userName').textContent = currentUser.name;
      document.getElementById('userEmail').textContent = currentUser.email;
      document.getElementById('userPhone').textContent = currentUser.phone;
      
      const userInitial = currentUser.name.charAt(0).toUpperCase();
      document.getElementById('userInitials').textContent = userInitial;
    } else {
      loginStatus.textContent = 'Welcome!';
    }
  }

  // === SPA NAVIGATION ===
  function showPage(id) {
    document.querySelectorAll('section').forEach(sec => sec.classList.remove('active'));
    const targetSection = document.getElementById(id);
    if (targetSection) {
        targetSection.classList.add('active');
    }
    
    // Load specific content when page is shown
    if (id === 'buslist') renderBuses();
    if (id === 'hotels') renderHotels();
    if (id === 'seats') renderSeats();
    if (id === 'payment') resetPaymentForms();
    if (id === 'ticket') updateTicketDetails();
  }

  // === SEARCH FUNCTIONALITY ===
  document.getElementById('searchForm').addEventListener('submit', function(e) {
    e.preventDefault();
    bookingDetails.from = document.getElementById('from').value;
    bookingDetails.to = document.getElementById('to').value;
    bookingDetails.date = document.getElementById('date').value;
    bookingDetails.passengers = parseInt(document.getElementById('passengers').value);
    
    if (bookingDetails.from && bookingDetails.to && bookingDetails.date) {
      localStorage.setItem('bookingDetails', JSON.stringify(bookingDetails));
      showPage('buslist');
    } else {
      alert('Please fill all fields');
    }
  });

  // === BUS DATA & RENDERING ===
  function renderBuses() {
    const busList = document.getElementById('busList');
    const storedDetails = JSON.parse(localStorage.getItem('bookingDetails') || '{}');
    
    busList.innerHTML = buses.map(bus => `
      <div class="card bus-item">
        <div class="bus-info">
          <h3>${bus.name}</h3>
          <p>${bus.type} • ⭐ ${bus.rating} • Dep: ${bus.departure}</p>
          <p>${bus.seats} seats available • ${bus.amenities.join(' • ')}</p>
          ${storedDetails.from && storedDetails.to ? 
            `<p>Route: ${storedDetails.from} → ${storedDetails.to} | Date: ${storedDetails.date}</p>` : ''}
        </div>
        <div style="text-align: right;">
          <div class="bus-price">₹${bus.price}</div>
          <button class="btn" onclick="selectBus(${bus.id})">Select Seats</button>
        </div>
      </div>
    `).join('');
  }

  function selectBus(busId) {
    const bus = buses.find(b => b.id === busId);
    bookingDetails.bus = bus;
    bookingDetails.amount = bus.price * bookingDetails.passengers; // Calculate total price based on passengers
    
    // Update seat summary display
    document.getElementById('seatBookingSummary').innerHTML = 
      `${bookingDetails.bus.route} (${bookingDetails.date}) | Price/Seat: ₹${bookingDetails.bus.price}`;
      
    showPage('seats');
  }

  function sortBuses(criteria) {
    buses.sort((a, b) => {
      if (criteria === 'price') return a.price - b.price;
      if (criteria === 'rating') return b.rating - a.rating;
      if (criteria === 'departure') return a.departure.localeCompare(b.departure);
      return 0;
    });
    renderBuses();
  }

  // === HOTEL RENDERING (NEW) ===
  function renderHotels() {
    const hotelGrid = document.getElementById('hotelGrid');
    
    
    hotelGrid.innerHTML = hotels.map(hotel => `
      <div class="hotel-card card">
          <div style="background: ${hotel.imgColor}; height: 200px; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px;">
            ${hotel.city.charAt(0)}
          </div>
          <div class="hotel-info">
            <h3>${hotel.name}</h3>
            <p>${'⭐'.repeat(hotel.rating)}${'☆'.repeat(5 - hotel.rating)} (${hotel.rating})</p>
            <p>Location: ${hotel.city}</p>
            <p class="bus-price">₹${hotel.price.toLocaleString()}/night</p>
            <button class="btn">View Details</button>
          </div>
      </div>
    `).join('');
  }

  // === SEAT SELECTION ===
  function renderSeats() {
    const container = document.getElementById('seatContainer');
    container.innerHTML = '';
    
    // Generate 20 seats (A simple 4x5 grid for demonstration)
    for (let i = 1; i <= 20; i++) {
      const seat = document.createElement('button');
      seat.className = 'seat';
      seat.textContent = i; 
      seat.setAttribute('data-seat-num', i);
      seat.onclick = () => selectSeat(seat, i);
      
      // Mark seats as booked (Mocking data: 5 seats are already gone)
      const bookedSeats = [3, 4, 8, 12, 17]; 
      if (bookedSeats.includes(i)) {
        seat.classList.add('booked');
        seat.onclick = null;
      }
      
      container.appendChild(seat);
    }
    
    // Reset selection state
    selectedSeat = null;
    document.getElementById('proceedToPayment').disabled = true;
    document.getElementById('proceedToPayment').textContent = 'Select a seat to proceed';
  }

  function selectSeat(seat, number) {
    if (seat.classList.contains('booked')) return;
    
    // Handle single selection reset
    document.querySelectorAll('.seat').forEach(s => s.classList.remove('selected'));
    
    seat.classList.add('selected');
    selectedSeat = number;
    bookingDetails.seat = number;
    
    document.getElementById('proceedToPayment').disabled = false;
    document.getElementById('proceedToPayment').textContent = `Proceed to Payment - Seat ${number} (Total: ₹${bookingDetails.amount.toLocaleString()})`;
  }

  function proceedToPayment() {
    if (!selectedSeat) {
      alert('Please select a seat first');
      return;
    }
    showPage('payment');
  }

  // === PAYMENT FUNCTIONALITY ===
  function showPaymentForm(type) {
    // Reset all forms visibility
    document.getElementById('cardForm').style.display = 'none';
    document.getElementById('upiForm').style.display = 'none';
    
    // Show selected form
    document.getElementById(type + 'Form').style.display = 'block';
  }

  function resetPaymentForms() {
    document.getElementById('cardForm').style.display = 'none';
    document.getElementById('upiForm').style.display = 'none';
  }

  function processPayment(method) {
    alert(`Processing ₹${bookingDetails.amount.toLocaleString()} via ${method.toUpperCase()}...`);
    
    setTimeout(() => {
      showPage('ticket');
    }, 1500);
  }

  // === TICKET FUNCTIONALITY ===
  function updateTicketDetails() {
    const storedDetails = JSON.parse(localStorage.getItem('bookingDetails') || '{}');
    const pnr = 'BLB' + new Date().getFullYear() + Math.floor(100000 + Math.random() * 900000);
    
    document.getElementById('ticketPassenger').textContent = currentUser?.name || 'N/A';
    document.getElementById('ticketFrom').textContent = storedDetails.from || 'N/A';
    document.getElementById('ticketTo').textContent = storedDetails.to || 'N/A';
    document.getElementById('ticketDate').textContent = storedDetails.date || 'N/A';
    document.getElementById('ticketSeat').textContent = bookingDetails.seat || 'N/A';
    document.getElementById('ticketAmount').textContent = bookingDetails.amount.toLocaleString();
    document.getElementById('ticketPNR').textContent = pnr;
  }

  function downloadTicket() {
    const ticketData = `
      BLUEBUS E-TICKET
      =================
      Passenger: ${currentUser?.name || 'Passenger'}
      Route: ${bookingDetails.from} → ${bookingDetails.to}
      Date: ${bookingDetails.date}
      Seat: ${bookingDetails.seat}
      Total Amount Paid: ₹${bookingDetails.amount.toLocaleString()}
      PNR: ${document.getElementById('ticketPNR').textContent}
      
      Thank you for choosing BlueBus!
    `;
    
    const blob = new Blob([ticketData], { type: 'text/plain' });
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = `bluebus_ticket_${bookingDetails.seat}_${bookingDetails.date}.txt`;
    a.click();
    
    alert('Ticket download initiated!');
  }

  // === INITIALIZATION ===
  document.addEventListener('DOMContentLoaded', function() {
    // Set minimum date to today
    const today = new Date().toISOString().split('T')[0];
    document.getElementById('date').min = today;
    document.getElementById('date').value = today;
    
    // Load any stored booking details
    const storedDetails = JSON.parse(localStorage.getItem('bookingDetails') || '{}');
    if (storedDetails.from) document.getElementById('from').value = storedDetails.from;
    if (storedDetails.to) document.getElementById('to').value = storedDetails.to;
    if (storedDetails.date) document.getElementById('date').value = storedDetails.date;
    if (storedDetails.passengers) document.getElementById('passengers').value=storedDetails.passengers;updateLoginUI();renderBuses();renderHotels()});</script></body></html>